CC=g++
CFLAGS=-c -Wall
LDFLAGS=
MAIN_SOURCES=Main.cpp
CONSUMER_SOURCES=Consumer.cpp
PRODUCER_SOURCES=Producer.cpp
MAIN_OBJECTS=$(MAIN_SOURCES:.cpp=.o)
CONSUMER_OBJECTS=$(CONSUMER_SOURCES:.cpp=.o)
PRODUCER_OBJECTS=$(PRODUCER_SOURCES:.cpp=.o)
MAIN_EXECUTABLE=Main 
CONSUMER_EXECUTABLE=Consumer
PRODUCER_EXECUTABLE=Producer 


all: $(MAIN_EXECUTABLE) $(CONSUMER_EXECUTABLE) $(PRODUCER_EXECUTABLE)

Consumer.o: Consumer.cpp Message.h
Producer.o: Producer.cpp Message.h
Main.o: Main.cpp

$(MAIN_EXECUTABLE): $(MAIN_OBJECTS) 
	$(CC) $(MAIN_OBJECTS) -o $@

$(CONSUMER_EXECUTABLE): $(CONSUMER_OBJECTS) Message.h
	$(CC) $(CONSUMER_OBJECTS) -o $@

$(PRODUCER_EXECUTABLE): $(PRODUCER_OBJECTS) Message.h
	$(CC) $(PRODUCER_OBJECTS) -o $@

.cpp.o:
	$(CC) $(CFLAGS) $< -o $@

clean:
	rm -rf *.o $(MAIN_EXECUTABLE) $(CONSUMER_EXECUTABLE) $(PRODUCER_EXECUTABLE)